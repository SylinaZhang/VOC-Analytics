import{s as E}from"./index-DqLdeSEb.js";import{s as L}from"./index-h-Jv46ek.js";import{s as T}from"./index-Ct6l3lSw.js";import{u as J,r as a,o as R,w as B,a as p,c as _,b as t,t as o,d as i,e as M,F as z,f as $,n as q}from"./index-Bc3bAAiN.js";import{P as I}from"./ProductService-BtITuo-x.js";import{a as w}from"./axios-Dd5_8ppC.js";import"./index-CAMXmtmr.js";import"./index-fHEX8RNA.js";import"./index-nTfGZAwy.js";import"./index-DyY1ucbJ.js";import"./index-QvGz82GH.js";import"./index-Bw1x5_pn.js";import"./index-BCKLKQOk.js";import"./index-GJEliolN.js";import"./index-CDkZaVKK.js";import"./index-erLa119m.js";import"./index-CcJnEpJY.js";import"./index-DmU6RP03.js";import"./index-BewXgKyH.js";import"./index-DxvPLIE7.js";import"./index-D68DtoGj.js";import"./index-Fp3K4Y-L.js";import"./index-Cbx4cp3Y.js";const U={class:"grid grid-cols-12 gap-8"},G={class:"col-span-12 lg:col-span-6 xl:col-span-3"},H={class:"card mb-0"},K={class:"flex justify-between mb-4"},Q=t("span",{class:"block text-muted-color font-medium mb-4"},"评论总数",-1),W={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},X=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1),Y={class:"text-primary font-medium"},Z=t("span",{class:"text-muted-color"},"总标签",-1),tt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},et={class:"card mb-0"},st={class:"flex justify-between mb-4"},at=t("span",{class:"block text-muted-color font-medium mb-4"},"正向标签",-1),ot={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},lt=t("div",{class:"flex items-center justify-center bg-orange-100 dark:bg-orange-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-dollar text-orange-500 !text-xl"})],-1),ct={class:"text-primary font-medium"},nt=t("span",{class:"text-muted-color"},"标签占比",-1),it={class:"col-span-12 lg:col-span-6 xl:col-span-3"},rt={class:"card mb-0"},dt={class:"flex justify-between mb-4"},ut=t("span",{class:"block text-muted-color font-medium mb-4"},"购买动机",-1),mt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},pt=t("div",{class:"flex items-center justify-center bg-cyan-100 dark:bg-cyan-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-users text-cyan-500 !text-xl"})],-1),_t={class:"text-primary font-medium"},vt=t("span",{class:"text-muted-color"},"标签占比",-1),ht={class:"col-span-12 lg:col-span-6 xl:col-span-3"},xt={class:"card mb-0"},ft={class:"flex justify-between mb-4"},bt=t("span",{class:"block text-muted-color font-medium mb-4"},"期望",-1),gt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},yt=t("div",{class:"flex items-center justify-center bg-purple-100 dark:bg-purple-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-comment text-purple-500 !text-xl"})],-1),kt={class:"text-primary font-medium"},wt=t("span",{class:"text-muted-color"},"标签占比",-1),Ct={class:"col-span-12 xl:col-span-6"},St={class:"card"},jt=t("div",{class:"font-semibold text-xl mb-4"},"正向评论",-1),Ft={class:"card"},Pt=t("div",{class:"flex justify-between items-center mb-6"},[t("div",{class:"font-semibold text-xl"},"负面评论")],-1),Dt={class:"list-none p-0 m-0"},Vt={class:"text-surface-900 dark:text-surface-0 font-medium mr-2 mb-1 md:mb-0"},At=t("div",{class:"mt-1 text-muted-color"},null,-1),Nt={class:"mt-2 md:mt-0 flex items-center"},Ot={class:"bg-surface-300 dark:bg-surface-500 rounded-border overflow-hidden w-40 lg:w-24",style:{height:"8px"}},Et={class:"text-orange-500 ml-4 font-medium"},Lt={class:"col-span-12 xl:col-span-6"},Tt={class:"card"},Jt=t("div",{class:"font-semibold text-xl mb-4"},"购买动机",-1),Rt={class:"card"},Bt=t("div",{class:"font-semibold text-xl mb-4"},"期望",-1),C="https://4qbg7psib5.execute-api.us-east-1.amazonaws.com/test",de={__name:"Dashboard",setup(Mt){const{getPrimary:S,getSurface:j,isDarkTheme:F}=J(),P=a(null),d=a([]),c=a([]),e=a([]),u=a(null),v=a(null),m=a(null),h=a([]),x=a([]),f=a([]),b=a([]),D={indexAxis:"y"};a([{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-trash"}]),R(()=>{I.getProductsSmall().then(s=>P.value=s),u.value=g(),v.value=N(),m.value=y(),c.value=V(),d.value=A()});function V(){w.get(C+"/get_analysis_metrics").then(s=>{console.log(JSON.parse(s.data.body)),e.value=JSON.parse(s.data.body).tag_total_count,c.value=JSON.parse(s.data.body).term_percentage,c.value.motivations.forEach(l=>{h.value.push(l[0]),x.value.push(l[1])}),c.value.expectations.forEach(l=>{f.value.push(l[0]),b.value.push(l[1])})}).catch(s=>{console.error(s)})}function A(){w.get(C+"/get_analysis_details").then(s=>{d.value=JSON.parse(s.data.body)}).catch(s=>{console.error(s)})}function g(){const s=getComputedStyle(document.documentElement);return{labels:h.value,datasets:[{type:"bar",label:"购买动机",backgroundColor:s.getPropertyValue("--p-primary-400"),data:x.value,barThickness:32}]}}function N(){const s=getComputedStyle(document.documentElement);return{labels:f.value,datasets:[{type:"bar",label:"期望",backgroundColor:s.getPropertyValue("--p-primary-400"),data:b.value,barThickness:32}]}}function y(){const s=getComputedStyle(document.documentElement),l=s.getPropertyValue("--surface-border"),n=s.getPropertyValue("--text-color-secondary");return{maintainAspectRatio:!1,aspectRatio:.8,scales:{x:{stacked:!0,ticks:{color:n},grid:{color:"transparent",borderColor:"transparent"}},y:{stacked:!0,ticks:{color:n},grid:{color:l,borderColor:"transparent",drawTicks:!1}}}}}return B([S,j,F],()=>{u.value=g(),m.value=y()}),(s,l)=>{const n=T,O=L,k=E;return p(),_("div",U,[t("div",G,[t("div",H,[t("div",K,[t("div",null,[Q,t("div",W,o(d.value.length),1)]),X]),t("span",Y,o(e.value.advantages+e.value.disadvantages+e.value.expectations+e.value.motivations),1),Z])]),t("div",tt,[t("div",et,[t("div",st,[t("div",null,[at,t("div",ot,o(e.value.advantages),1)]),lt]),t("span",ct,o(parseFloat(e.value.advantages/(e.value.advantages+e.value.disadvantages+e.value.expectations+e.value.motivations)*100).toFixed(2))+" %",1),nt])]),t("div",it,[t("div",rt,[t("div",dt,[t("div",null,[ut,t("div",mt,o(e.value.motivations),1)]),pt]),t("span",_t,o(parseFloat(e.value.motivations/(e.value.advantages+e.value.disadvantages+e.value.expectations+e.value.motivations)*100).toFixed(2))+" % ",1),vt])]),t("div",ht,[t("div",xt,[t("div",ft,[t("div",null,[bt,t("div",gt,o(e.value.expectations),1)]),yt]),t("span",kt,o(parseFloat(e.value.expectations/(e.value.advantages+e.value.disadvantages+e.value.expectations+e.value.motivations)*100).toFixed(2))+" % ",1),wt])]),t("div",Ct,[t("div",St,[jt,i(O,{value:c.value.advantages,rows:8,paginator:!0,responsiveLayout:"scroll"},{default:M(()=>[i(n,{field:"0",header:"标签",style:{width:"65%"}}),i(n,{field:"1",header:"占比",sortable:!0,style:{width:"35%"}})]),_:1},8,["value"])]),t("div",Ft,[Pt,t("ul",Dt,[(p(!0),_(z,null,$(c.value.disadvantages,r=>(p(),_("li",{class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",key:r.id},[t("div",null,[t("span",Vt,o(r[0]),1),At]),t("div",Nt,[t("div",Ot,[t("div",{class:"bg-orange-500 h-full",style:q({width:r[1]+"%"})},null,4)]),t("span",Et,"%"+o(parseFloat(r[1]).toFixed(2)),1)])]))),128))])])]),t("div",Lt,[t("div",Tt,[Jt,i(k,{type:"bar",data:u.value,options:m.value,class:"h-80"},null,8,["data","options"])]),t("div",Rt,[Bt,i(k,{type:"bar",data:v.value,options:D,class:"h-[30rem]",indexAxis:s.y},null,8,["data","indexAxis"])])])])}}};export{de as default};
